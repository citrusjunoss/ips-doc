**工作文档**

---
> Erp项目

该约定提供了一定的参考，可以帮助你规避错误，改善代码的可读性和开发体验。

# 组件化
> 实现页面某一部分功能的结构、样式和逻辑封装成为一个整体，使其高内聚，低耦合，达到分治与复用的目的。

- 组件之间不会相互影响，能有效减少出现问题时定位和解决问题的时间
- 组件化程度高的页面，具有清晰的页面组织和高可读性的HTML结构代码，组件之间的关系一目了然
- 组件化会强迫开发人员划清各个组件的功能边界，使得开发出的功能更加健壮
- 结构和功能的复用，减少项目代码耦合

# 组件类划分
> vue中将组件划分为UI组件、应用组件、业务组件三种，但是并不能满足实际开发，我们划分为公共基础组件、公共组件、应用组件、业务组件。

- 公共基础组件： 无关业务的UI或功能组件， 粒度很小，具备通用性。
- 公共组件： 低耦合业务，UI和功能完全，它基于公共基础组件进行的封装和组合， 粒度适中，具备通用性。
- 应用组件： 根据业务功能和UI设计，它基于公共组件进行的封装和组合， 粒度很粗，具备局部通用性。
- 业务组件： 完成某个业务模块具体业务的组件，不需要具备通用性。

# 公共组件开发

> 公共组件包括公共基础组件和公共组件两部分。它提供项目所有开发者使用。

## 开发前须知

为了Javascript更简洁、容易阅读请尽量使用ES6语法，部分参考如下：

- 正确使用const、let替代var
- 字符串拼接使用字符串模板`${this.data}`
- 工具函数等依赖单独分离，使用时使用improt引入
- 解构赋值、箭头函数、对象字面量缩写

.....

## 组件目录
- 公共组件应该放在components／目录下，基础组件放在componets／Base目录下，应用组件和业务组件在各路由目录中
- 目录命名：除脚手架已生成目录外，其余涉及到组件的目录都使用大驼峰命名，比如CamelCase。（注意windows系统对目录大小写不敏感）

## 组件命名
- 尽量简单、表意
- 大驼峰命名法，比如 ButtonItem
- 基础组件以Base为命名空间，公共组件以Ips为命名空间
- 如组件需要嵌套使用，子组件命名在父组件后加item，比如TimeLine及TimeLineItem

## 组件结构

vue方法放置顺序：

components 、props 、data 、created 、mounted 、activited 、update 、beforRouteUpdate 、methods 、filter 、computed 、watch

## 属性props
- 必须对传入数据的类型进行验证，并且设置默认值
- 对于有尺寸的size，请参照elementUI使用small、mini、large，默认适中。
- 对于传入参数为Boolen类型的， 统一设置默认为false


## 事件

- 以小驼峰命名法且on开头的动宾短语，比如 onChange
- 使用 `$emit`对父级组件触发事件
- 保持组件独立，尽量不依赖其他组件操作（ref调用属性或功能，this.$parent等）

## 样式表
- 样式表行内必须添加 `scoped` 属性
- 以组件名为命名空间，方便css调试且避免全局污染，推荐 `.IpsUpload__content { }`
- 尽量使用flex布局


## 撰写组件文档

组件开发完成后请注释署名。然后前往项目组件文档进行撰写工作。

文档最少包括一下几项：组件感慨说明及文件位置、基础用法、属性参数解释说明、事件参数介绍说明。（请参照已有组件例子）

检查组件是否良好：

- 简洁易用的属性API（props为通用类型String、Boolen、Number）
- 通用性、可拓展性
- 独立可用、单一职责

# 公共组件的维护和修改

- 不是自己开发的组件时，联系开发人员进行修改。
- 自己开发的组件修改接口后必须兼容老接口（除非你能确定没有其他同事使用你的组件）。

画重点： 不要随便去修改别人的组件代码，后果很严重...
